async function trackVisit(){try{await fetch("/api/track-visit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page_path:window.location.pathname})})}catch(e){}}window.addEventListener("load",trackVisit),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("navList")||document.getElementById("navListHub"),t=document.querySelectorAll(".nav-link"),n=document.querySelectorAll(".reveal"),o=document.getElementById("glassCard"),i=document.getElementById("year")||document.getElementById("yearHub"),l=document.getElementById("contactForm"),s=document.getElementById("formNotice"),a=document.getElementById("resetBtn");document.getElementById("logo").addEventListener("click",(function(e){e.preventDefault(),0===window.scrollY?(mainContent.style.opacity="0",myDropdown.style.opacity="0",logoImg.style.opacity="0.8",logoImg.style.left="50%",logoImg.style.top="10%",logoImg.style.width="600px",setTimeout((()=>{window.location.href="index.html"}),1e3)):window.scrollTo({top:0,behavior:"smooth"})})),document.getElementById("nexcoreSign").addEventListener("click",(function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})),i&&(i.textContent=(new Date).getFullYear()),document.querySelectorAll('a[href^="#"]').forEach((t=>{t.addEventListener("click",(n=>{const o=document.querySelector(t.getAttribute("href"));if(!o)return;n.preventDefault();const i=o.getBoundingClientRect().top+window.pageYOffset-82;window.scrollTo({top:i,behavior:"smooth"}),window.innerWidth<=980&&e&&"flex"===e.style.display&&(e.style.display="")}))}));const d=Array.from(document.querySelectorAll("main section[id]"));window.addEventListener("scroll",(()=>{const e=window.scrollY+120;let n=d[0]&&d[0].id;for(const t of d)t.offsetTop<=e&&(n=t.id);t.forEach((e=>{e.classList.toggle("active",e.getAttribute("href")===`#${n}`||e.getAttribute("href")===n)}))}),{passive:!0});const r=()=>{const e=window.innerHeight;n.forEach((t=>{t.getBoundingClientRect().top<e-80&&t.classList.add("visible")}))};r(),window.addEventListener("scroll",r,{passive:!0}),o&&(document.addEventListener("mousemove",(e=>{const t=o.getBoundingClientRect(),n=t.left+t.width/2,i=t.top+t.height/2,l=(e.clientX-n)/t.width,s=(e.clientY-i)/t.height;o.style.transform=`translate3d(${8*l}px, ${8*s}px, 0) rotate(${1.2*l}deg)`})),document.addEventListener("mouseleave",(()=>{o.style.transform=""}))),l.addEventListener("submit",(e=>{const t=l.name.value.trim(),n=l.email.value.trim(),o=l.message.value.trim();t&&n&&o?s.textContent="Sending...":(e.preventDefault(),s.textContent="Please fill all fields.")})),a.addEventListener("click",(()=>{l.reset(),s.textContent=""}));const c=window.matchMedia("(prefers-reduced-motion: reduce)");c&&c.matches&&(document.querySelectorAll(".bg-orbit").forEach((e=>e.style.animation="none")),document.querySelectorAll(".reveal").forEach((e=>e.classList.add("visible"))));const m=document.getElementById("changing-text");if(!m)return void console.warn("changing-text element not found – tiny rotation aborted");const y=['<div class="flag-includes">\n        <img src="assets/images/oman.webp" alt="Oman flag">\n        <span>Proudly Built in Oman</span>\n      </div>','<div class="flag-includes">\n        <img src="assets/images/eu.webp" alt="EU flag">\n        <span>EU GDPR-aligned</span>\n      </div>',"Powered by NexCore • Driven by ambition","Crafted with care • Inspired by simplicity","Fast • Focused • Clean",'Enhanced for <i class="fa-brands fa-edge" aria-hidden="true"></i> & <i class="fa-brands fa-android" aria-hidden="true"></i>'];let u=0;m.innerHTML=y[u],setInterval((()=>{m.classList.add("fade-out"),setTimeout((()=>{u=(u+1)%y.length,m.innerHTML=y[u],m.offsetHeight,m.classList.remove("fade-out")}),550)}),3e3)}));const myDropdown=document.getElementById("myDropdown"),coreMenu=document.getElementById("coreMenu");function filterFunction(){const e=document.getElementById("myInput").value.toUpperCase(),t=document.getElementById("myDropdown").getElementsByTagName("a");for(let n=0;n<t.length;n++)txtValue=t[n].textContent||t[n].innerText,txtValue.toUpperCase().indexOf(e)>-1?t[n].style.display="":t[n].style.display="none"}coreMenu.addEventListener("click",(()=>{coreMenu.classList.toggle("active"),"visible"==myDropdown.style.visibility&&1==myDropdown.style.opacity?(coreMenu.style,myDropdown.style.visibility="hidden",myDropdown.style.opacity=0,myDropdown.style.transform="translateY(0)",myDropdown.style.userSelect="none"):(myDropdown.style.visibility="visible",myDropdown.style.opacity=1,myDropdown.style.transform="translateY(10px)",myDropdown.style.userSelect="auto")})),document.addEventListener("click",(e=>{coreMenu.contains(e.target)||myDropdown.contains(e.target)||(coreMenu.classList.remove("active"),myDropdown.style.visibility="hidden",myDropdown.style.opacity=0,myDropdown.style.transform="translateY(0)",myDropdown.style.userSelect="none")}));const phone=document.getElementById("phoneMockup");function openMobilePreview(){phone.classList.add("expand"),setTimeout((()=>{window.location.href="mobile-preview.html"}),900)}phone&&phone.addEventListener("click",openMobilePreview);const logoImg=document.getElementById("logoImg"),shape=document.getElementById("shape"),mainContent=document.querySelector("main"),links=document.querySelectorAll("a.fade");links.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),mainContent.style.opacity="0",myDropdown.style.opacity="0",logoImg.style.opacity="0.8",logoImg.style.left="50%",logoImg.style.top="10%",logoImg.style.width="600px",setTimeout((()=>{window.location.href=e.target.href}),1e3)}))})),window.onload=()=>{logoImg.style.filter="drop-shadow(0 0 25px rgba(110, 231, 243, 1)",logoImg.style.webkitFilter="drop-shadow(0 0 25px rgba(110, 231, 243, 1)",logoImg.style.left="100%",logoImg.style.top="15%",logoImg.style.width="200px",mainContent.style.opacity="1",setTimeout((()=>{logoImg.style.opacity="0.3"}),1e3)};const searchInput=document.getElementById("projectSearch"),projectsContainer=document.getElementById("projects-container");function showWebsiteLabel(){var e=document.getElementById("websiteShow"),t=document.getElementById("websiteURLLabel");1==e.checked?(t.style.display="block",t.setAttribute("required","required")):(t.style.display="none",t.removeAttribute("required"))}searchInput.addEventListener("input",(()=>{const e=searchInput.value.toLowerCase();projectsContainer.querySelectorAll(".project-card").forEach((t=>{const n=t.textContent.toLowerCase();t.style.display=n.includes(e)?"block":"none"}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("changing-text");if(!e)return void console.warn("changing-text element not found – tiny rotation aborted");let t=0;e.innerHTML=sentences[t],setInterval((()=>{e.classList.add("fade-out"),setTimeout((()=>{t=(t+1)%sentences.length,e.innerHTML=sentences[t],e.offsetHeight,e.classList.remove("fade-out")}),550)}),3e3)})),document.querySelectorAll('img[loading="lazy"]').forEach((e=>{e.addEventListener("load",(()=>{e.classList.add("is-loaded")}))}));